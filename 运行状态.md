# 财务管理系统 - 运行状态

## ✅ 环境配置完成

### 已安装的软件

1. **PHP 8.5.0** ✅
   - 位置：`/opt/homebrew/opt/php`
   - 版本：PHP 8.5.0 (cli)
   - 扩展：已包含 PDO、PDO_MySQL 等必要扩展

2. **MySQL 9.5.0** ✅
   - 服务状态：运行中
   - 数据库：`coffee_finance` 已创建
   - 字符集：utf8mb4

### 数据库状态

- ✅ 数据库 `coffee_finance` 已创建
- ✅ 数据库结构已导入（schema.sql）
- ✅ 默认数据已初始化：
  - 4 种角色（老板、店长、财务、员工）
  - 默认管理员用户（admin/admin123）
  - 10 种分类（4 种收入分类，6 种支出分类）
  - 6 种支付方式

### 服务器状态

- ✅ PHP 内置服务器已启动
- 🌐 访问地址：http://localhost:8000
- 📍 项目目录：`/Users/semon/Documents/code/caiwu/caiwucuror`
- 🔌 端口：8000

## 🚀 访问系统

### 登录页面
```
http://localhost:8000/index.php?r=auth/login
```

### 默认登录信息
- **用户名**: `admin`
- **密码**: `admin123`

⚠️ **首次登录后请立即修改密码！**

### 主要功能页面

1. **Dashboard 仪表盘**
   ```
   http://localhost:8000/index.php?r=reports/dashboard
   ```

2. **交易列表**
   ```
   http://localhost:8000/index.php?r=transactions/list
   ```

3. **创建交易**
   ```
   http://localhost:8000/index.php?r=transactions/create
   ```

4. **分类管理**
   ```
   http://localhost:8000/index.php?r=settings/categories
   ```

5. **支付方式管理**
   ```
   http://localhost:8000/index.php?r=settings/paymentMethods
   ```

6. **供应商管理**
   ```
   http://localhost:8000/index.php?r=settings/vendors
   ```

## 📋 功能分析

详细功能分析请查看：[功能分析报告.md](功能分析报告.md)

### 核心功能模块

1. **用户认证与权限管理**
   - 登录/登出
   - 4 种角色权限控制

2. **交易管理**
   - 创建收入/支出交易
   - 交易列表与多条件筛选
   - 交易详情查看
   - 交易作废（权限控制）

3. **报表统计**
   - Dashboard 仪表盘
   - 今日/本月统计
   - 7 天趋势分析
   - 按分类统计

4. **设置管理**
   - 分类管理（支持二级分类）
   - 支付方式管理
   - 供应商管理

5. **国际化支持**
   - 中文/越南语双语
   - 语言切换功能

## 🛠️ 常用命令

### 启动服务器
```bash
./start_macos.sh
```

或手动启动：
```bash
cd /Users/semon/Documents/code/caiwu/caiwucuror
php -S localhost:8000 -t public
```

### 停止服务器
按 `Ctrl+C` 停止服务器

### 检查 MySQL 服务状态
```bash
brew services list
```

### 重启 MySQL 服务
```bash
brew services restart mysql
```

### 查看数据库
```bash
mysql -u root coffee_finance
```

## 📁 项目结构

```
caiwucuror/
├── app/                    # 应用程序核心
│   ├── config/            # 配置文件
│   │   └── db.php        # 数据库配置（已创建）
│   ├── core/             # 核心类
│   ├── controllers/      # 控制器
│   ├── models/           # 数据模型
│   └── views/            # 视图模板
├── public/               # Web 入口目录
│   └── index.php        # 入口文件
├── database/            # 数据库脚本
│   └── schema.sql      # 数据库结构（已导入）
├── lang/               # 语言包
├── setup_macos.sh      # macOS 安装脚本
├── start_macos.sh      # macOS 启动脚本
├── README_MACOS.md     # macOS 使用说明
└── 功能分析报告.md     # 功能分析报告
```

## 🔒 安全提示

1. **修改默认密码**：首次登录后立即修改 admin 用户密码
2. **数据库密码**：如果 MySQL 设置了密码，请修改 `app/config/db.php`
3. **生产环境**：部署到生产环境时请：
   - 启用 HTTPS
   - 限制数据库用户权限
   - 配置防火墙规则
   - 定期备份数据库

## 📝 技术栈

- **后端**: PHP 8.5.0 (原生 PHP，无框架)
- **数据库**: MySQL 9.5.0
- **前端**: HTML5, CSS3, JavaScript (原生)
- **架构**: MVC 模式
- **安全**: PDO, CSRF Token, Password Hash

## ✨ 系统特性

- ✅ SQL 注入防护（PDO 预处理语句）
- ✅ XSS 防护（输出转义）
- ✅ CSRF 防护（Token 验证）
- ✅ 密码加密（password_hash）
- ✅ 基于角色的访问控制（RBAC）
- ✅ 中越双语支持
- ✅ 响应式设计（移动端支持）

---

**最后更新**: 2025-12-13
**状态**: ✅ 运行正常

