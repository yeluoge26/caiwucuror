# 密码修复说明

## 问题描述

数据库中的默认管理员密码哈希不正确，导致无法使用 `admin123` 登录。

## 已修复

✅ **密码已更新为正确的哈希值**

### 当前登录信息

- **用户名**: `admin`
- **密码**: `admin123`

### 修复内容

1. ✅ 更新了数据库中的密码哈希
2. ✅ 验证了密码可以正常使用
3. ✅ 更新了 `database/schema.sql` 文件，确保以后安装时使用正确的密码

## 验证方法

运行测试脚本验证密码：

```bash
php test_password.php
```

应该显示：
```
测试密码 'admin123': ✅ 正确
```

## 如果仍然无法登录

请检查以下几点：

1. **清除浏览器缓存和 Cookie**
   - 可能保存了旧的 session 信息

2. **检查数据库连接**
   ```bash
   mysql -u root coffee_finance -e "SELECT username, LEFT(password_hash, 20) as hash FROM users WHERE username='admin';"
   ```

3. **手动重置密码**（如果需要）
   ```bash
   php -r "\$hash = password_hash('admin123', PASSWORD_DEFAULT); echo \$hash;"
   # 复制输出的哈希值，然后执行：
   mysql -u root coffee_finance -e "UPDATE users SET password_hash = '复制的哈希值' WHERE username = 'admin';"
   ```

4. **检查用户状态**
   ```bash
   mysql -u root coffee_finance -e "SELECT username, is_active FROM users WHERE username='admin';"
   ```
   确保 `is_active` 为 `1`

## 当前密码哈希

```
$2y$12$cKipuCZmfNWohh5ZSFdWCuQhs/5tzzjbVL.g/lFeicgEn8tYEhHHS
```

这个哈希值对应密码：`admin123`

---

**修复时间**: 2025-12-13
**状态**: ✅ 已修复

